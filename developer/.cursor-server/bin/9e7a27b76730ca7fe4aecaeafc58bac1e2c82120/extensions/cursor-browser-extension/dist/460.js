"use strict";exports.id=460,exports.ids=[460],exports.modules={"./node_modules/node-fetch/src/utils/multipart-parser.js":(e,t,n)=>{n.d(t,{toFormData:()=>D});var r=n("./node_modules/fetch-blob/from.js"),a=n("./node_modules/formdata-polyfill/esm.min.js");let s=0;const o={START_BOUNDARY:s++,HEADER_FIELD_START:s++,HEADER_FIELD:s++,HEADER_VALUE_START:s++,HEADER_VALUE:s++,HEADER_VALUE_ALMOST_DONE:s++,HEADERS_ALMOST_DONE:s++,PART_DATA_START:s++,PART_DATA:s++,END:s++};let i=1;const d=i,E=i*=2,A=e=>32|e,l=()=>{};class h{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=l,this.onHeaderField=l,this.onHeadersEnd=l,this.onHeaderValue=l,this.onPartBegin=l,this.onPartData=l,this.onPartEnd=l,this.boundaryChars={},e="\r\n--"+e;const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n),this.boundaryChars[t[n]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=o.START_BOUNDARY}write(e){let t=0;const n=e.length;let r=this.index,{lookbehind:a,boundary:s,boundaryChars:i,index:l,state:h,flags:D}=this;const c=this.boundary.length,f=c-1,_=e.length;let T,u;const R=e=>{this[e+"Mark"]=t},H=e=>{delete this[e+"Mark"]},b=(e,t,n,r)=>{void 0!==t&&t===n||this[e](r&&r.subarray(t,n))},L=(n,r)=>{const a=n+"Mark";a in this&&(r?(b(n,this[a],t,e),delete this[a]):(b(n,this[a],e.length,e),this[a]=0))};for(t=0;t<n;t++)switch(T=e[t],h){case o.START_BOUNDARY:if(l===s.length-2){if(45===T)D|=E;else if(13!==T)return;l++;break}if(l-1==s.length-2){if(D&E&&45===T)h=o.END,D=0;else{if(D&E||10!==T)return;l=0,b("onPartBegin"),h=o.HEADER_FIELD_START}break}T!==s[l+2]&&(l=-2),T===s[l+2]&&l++;break;case o.HEADER_FIELD_START:h=o.HEADER_FIELD,R("onHeaderField"),l=0;case o.HEADER_FIELD:if(13===T){H("onHeaderField"),h=o.HEADERS_ALMOST_DONE;break}if(l++,45===T)break;if(58===T){if(1===l)return;L("onHeaderField",!0),h=o.HEADER_VALUE_START;break}if(u=A(T),u<97||u>122)return;break;case o.HEADER_VALUE_START:if(32===T)break;R("onHeaderValue"),h=o.HEADER_VALUE;case o.HEADER_VALUE:13===T&&(L("onHeaderValue",!0),b("onHeaderEnd"),h=o.HEADER_VALUE_ALMOST_DONE);break;case o.HEADER_VALUE_ALMOST_DONE:if(10!==T)return;h=o.HEADER_FIELD_START;break;case o.HEADERS_ALMOST_DONE:if(10!==T)return;b("onHeadersEnd"),h=o.PART_DATA_START;break;case o.PART_DATA_START:h=o.PART_DATA,R("onPartData");case o.PART_DATA:if(r=l,0===l){for(t+=f;t<_&&!(e[t]in i);)t+=c;t-=f,T=e[t]}if(l<s.length)s[l]===T?(0===l&&L("onPartData",!0),l++):l=0;else if(l===s.length)l++,13===T?D|=d:45===T?D|=E:l=0;else if(l-1===s.length)if(D&d){if(l=0,10===T){D&=~d,b("onPartEnd"),b("onPartBegin"),h=o.HEADER_FIELD_START;break}}else D&E&&45===T?(b("onPartEnd"),h=o.END,D=0):l=0;if(l>0)a[l-1]=T;else if(r>0){const e=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);b("onPartData",0,r,e),r=0,R("onPartData"),t--}break;case o.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}L("onHeaderField"),L("onHeaderValue"),L("onPartData"),this.index=l,this.state=h,this.flags=D}end(){if(this.state===o.HEADER_FIELD_START&&0===this.index||this.state===o.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==o.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}async function D(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");const n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");const s=new h(n[1]||n[2]);let o,i,d,E,A,l;const D=[],c=new a.fS,f=e=>{d+=R.decode(e,{stream:!0})},_=e=>{D.push(e)},T=()=>{const e=new r.ZH(D,l,{type:A});c.append(E,e)},u=()=>{c.append(E,d)},R=new TextDecoder("utf-8");R.decode(),s.onPartBegin=function(){s.onPartData=f,s.onPartEnd=u,o="",i="",d="",E="",A="",l=null,D.length=0},s.onHeaderField=function(e){o+=R.decode(e,{stream:!0})},s.onHeaderValue=function(e){i+=R.decode(e,{stream:!0})},s.onHeaderEnd=function(){if(i+=R.decode(),o=o.toLowerCase(),"content-disposition"===o){const e=i.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(E=e[2]||e[3]||""),l=function(e){const t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;const n=t[2]||t[3]||"";let r=n.slice(n.lastIndexOf("\\")+1);return r=r.replace(/%22/g,'"'),r=r.replace(/&#(\d{4});/g,(e,t)=>String.fromCharCode(t)),r}(i),l&&(s.onPartData=_,s.onPartEnd=T)}else"content-type"===o&&(A=i);i="",o=""};for await(const t of e)s.write(t);return s.end(),c}}};
//# sourceMappingURL=http://go/sourcemap/sourcemaps/9e7a27b76730ca7fe4aecaeafc58bac1e2c82120/extensions/cursor-browser-extension/dist/460.js.map