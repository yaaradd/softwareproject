"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.joinAllInternals = void 0;
const identity_js_1 = require("../util/identity.js");
const mapOneOrManyArgs_js_1 = require("../util/mapOneOrManyArgs.js");
const pipe_js_1 = require("../util/pipe.js");
const mergeMap_js_1 = require("./mergeMap.js");
const toArray_js_1 = require("./toArray.js");
function joinAllInternals(joinFn, project) {
    return (0, pipe_js_1.pipe)((0, toArray_js_1.toArray)(), (0, mergeMap_js_1.mergeMap)((sources) => joinFn(sources)), project ? (0, mapOneOrManyArgs_js_1.mapOneOrManyArgs)(project) : identity_js_1.identity);
}
exports.joinAllInternals = joinAllInternals;